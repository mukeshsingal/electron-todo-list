<!DOCTYPE html>
<html lang="en">

<head>
    <title>Add ToDo List Item</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        form {
            margin: 10px;
        }

        #title-bar1 {
            -webkit-app-region: drag;
        }

        #title-bar-btns1 {
            -webkit-app-region: no-drag;
            position: fixed;
            top: 0px;
            right: 6px;
        }
    </style>
</head>

<body>
    <nav style="line-height:46px; height: 46px;">
        <div id="title-bar1" class="row" style="background-color: TEAL; font-size: 20px">
            <div class="col s6">
                
                    <a>Add To-Do</a>
                
            </div>
            <div class="col s6">
                <div id="title-bar-btns1" class="right-align" style="margin-right: 20px">
                    <button id="close-btn1" class="btn-floating red" style="width:15px; height:15px"></button>
                </div>
            </div>
        </div>
    </nav>
    <div class="container">
        <form>
            <div>
                <label>Enter Description</label>
                <input type="text" id="item" autofocus>
            </div>
            <button class="btn waves-effect waves-light" type="submit">Add Item</button>
        </form>
    </div>
    <script>
        (function () {
            // Retrieve remote BrowserWindow
            const { BrowserWindow } = require('electron').remote

            function init() {
            
                // Close app
                document.getElementById("close-btn1").addEventListener("click", (e) => {
                    var window = BrowserWindow.getFocusedWindow();
                    window.close();
                });
            };

            document.onreadystatechange = () => {
                if (document.readyState == "complete") {
                    init();
                }
            };
        })();
    </script>
    <script>
        const electron = require('electron');
        const { ipcRenderer } = electron;

        const form = document.querySelector('form');
        form.addEventListener('submit', submitForm);

        function submitForm(e) {
            e.preventDefault();
            const item = document.querySelector("#item").value;
            ipcRenderer.send('item:add', item);
        }
    </script>
</body>

</html>